<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>monkeybonercards presents The Reignman Collection</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Russo+One&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00653A;      /* Sonics Green */
            --secondary: #FFC200;    /* Sonics Yellow/Gold */
            --accent: #9E2A2F;       /* Sonics Red accent */
            --dark: #173F35;         /* Emerald Green */
            --light: #f5f5f5;
            --court: #8B634B;        /* Bronze accent */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Mono', monospace;
            background: linear-gradient(135deg, var(--dark) 0%, #2c2c2c 100%);
            color: var(--light);
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        /* Main layout container */
        .main-container {
            display: flex;
            min-height: 100vh;
        }

        /* Fixed left sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 320px;
            height: 100vh;
            background: linear-gradient(180deg, rgba(0, 101, 58, 0.3) 0%, rgba(0, 0, 0, 0.5) 100%);
            border-right: 3px solid var(--secondary);
            overflow-y: auto;
            z-index: 100;
            padding: 20px;
        }

        /* Sidebar scrollbar styling */
        .sidebar::-webkit-scrollbar {
            width: 8px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--secondary);
            border-radius: 4px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* Main content area */
        .content-wrapper {
            margin-left: 320px;
            flex: 1;
            width: calc(100% - 320px);
        }

        /* Animated Basketball Court Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 100px,
                    rgba(255, 199, 44, 0.03) 100px,
                    rgba(255, 199, 44, 0.03) 101px
                ),
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 100px,
                    rgba(255, 199, 44, 0.03) 100px,
                    rgba(255, 199, 44, 0.03) 101px
                );
            z-index: 0;
            pointer-events: none;
        }

        header {
            position: relative;
            padding: 60px 20px 40px;
            text-align: center;
            background: linear-gradient(180deg, rgba(0, 101, 58, 0.2) 0%, transparent 100%);
            border-bottom: none;
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: nowrap;
        }

        .header-logo {
            height: clamp(2.5rem, 8vw, 5rem);
            width: auto;
        }

        h1 {
            font-family: 'Russo One', sans-serif;
            font-size: clamp(2.5rem, 8vw, 5rem);
            color: var(--secondary);
            text-shadow: 
                3px 3px 0 var(--primary),
                6px 6px 0 var(--accent);
            letter-spacing: 3px;
            margin: 0;
        }

        .subtitle {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--primary);
            letter-spacing: 4px;
            text-transform: uppercase;
        }

        .controls {
            position: relative;
            padding: 0;
            background: transparent;
            border: none;
            border-radius: 0;
            backdrop-filter: none;
            margin: 0;
            max-width: none;
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--secondary);
        }

        .sidebar-header h2 {
            font-family: 'Russo One', sans-serif;
            font-size: 1.5rem;
            color: var(--secondary);
            text-shadow: 2px 2px 0 var(--primary);
            margin-bottom: 8px;
        }

        .sidebar-header p {
            font-size: 0.85rem;
            color: var(--primary);
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 1px;
        }

        .filter-header {
            display: none;
        }

        .clear-btn {
            width: 100%;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--accent) 0%, #900a20 100%);
            font-size: 0.9rem;
            padding: 10px 20px;
        }

        .filter-grid {
            display: flex;
            flex-direction: column;
            gap: 18px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 0.95rem;
            color: var(--secondary);
            margin-bottom: 6px;
            letter-spacing: 1px;
        }

        .filter-group input,
        .filter-group select {
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--primary);
            border-radius: 6px;
            color: var(--light);
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .filter-group input:focus,
        .filter-group select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 15px rgba(255, 199, 44, 0.3);
        }

        .filter-group select {
            cursor: pointer;
        }

        .filter-group select option {
            background: var(--dark);
            padding: 8px;
        }

        .filter-group select option:checked {
            background: linear-gradient(135deg, var(--primary) 0%, #004a80 100%);
        }

        .sort-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid var(--primary);
        }

        .sort-section label {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 0.95rem;
            color: var(--secondary);
            letter-spacing: 1px;
        }

        .sort-section select {
            width: 100%;
            max-width: none;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--primary);
            border-radius: 6px;
            color: var(--light);
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            cursor: pointer;
        }

        .apply-filters-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--secondary) 0%, #d4a000 100%);
            color: var(--dark);
            border: 3px solid var(--primary);
            font-size: 1.1rem;
            padding: 12px 20px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 194, 0, 0.3);
            margin-top: 10px;
        }

        .apply-filters-btn:hover {
            background: linear-gradient(135deg, #d4a000 0%, var(--secondary) 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 194, 0, 0.5);
        }

        .results-info {
            text-align: center;
            padding: 12px;
            background: rgba(255, 194, 0, 0.15);
            border: 2px solid var(--secondary);
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .results-info span {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            color: var(--secondary);
            letter-spacing: 1px;
        }

        .sort-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }

        button {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary) 0%, #004a80 100%);
            color: var(--secondary);
            border: 3px solid var(--secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 2px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 199, 44, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        button:hover::before {
            width: 300px;
            height: 300px;
        }

        button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 199, 44, 0.4);
            border-color: var(--accent);
        }

        button.active {
            background: linear-gradient(135deg, var(--accent) 0%, #900a20 100%);
            border-color: var(--secondary);
            box-shadow: 0 0 20px rgba(200, 16, 46, 0.6);
        }

        .view-toggle {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }

        .view-toggle label {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            color: var(--secondary);
            letter-spacing: 2px;
        }

        #gallery {
            position: relative;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-container {
            perspective: 1000px;
            animation: cardAppear 0.6s ease-out backwards;
        }

        .card-container:nth-child(1) { animation-delay: 0.1s; }
        .card-container:nth-child(2) { animation-delay: 0.2s; }
        .card-container:nth-child(3) { animation-delay: 0.3s; }
        .card-container:nth-child(4) { animation-delay: 0.4s; }
        .card-container:nth-child(5) { animation-delay: 0.5s; }
        .card-container:nth-child(6) { animation-delay: 0.6s; }

        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: translateY(50px) rotateX(-15deg);
            }
            to {
                opacity: 1;
                transform: translateY(0) rotateX(0);
            }
        }

        .card {
            position: relative;
            width: 100%;
            padding-bottom: 140%;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
            cursor: pointer;
        }

        .card-container:hover .card {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 199, 44, 0.2);
            overflow: hidden;
            border: 4px solid var(--secondary);
        }

        .card-front {
            background: linear-gradient(135deg, #ffffff 0%, #e8e8e8 100%);
        }

        .card-back {
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 100%);
            transform: rotateY(180deg);
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* Landscape card support - images will load and check their orientation */
        .card-image.landscape {
            object-fit: contain;
            background: rgba(0, 0, 0, 0.4);
        }

        .card-info {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 101, 58, 0.15);
            border: 2px solid var(--primary);
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        .card-info h3 {
            font-family: 'Russo One', sans-serif;
            color: var(--secondary);
            font-size: 1.1rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            line-height: 1.3;
        }

        .card-info p {
            display: none; /* Hide all default info */
        }

        .details-toggle {
            margin-top: 15px;
            width: 100%;
        }

        .extra-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, margin-top 0.4s ease;
            margin-top: 0;
        }

        .extra-details.active {
            max-height: 500px;
            margin-top: 15px;
        }

        .extra-details p {
            display: block !important; /* Show in expanded state */
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 194, 0, 0.2);
            color: var(--light);
            font-size: 0.9rem;
        }

        .extra-details p .label {
            color: var(--secondary);
            font-weight: bold;
        }

        .extra-details p:last-child {
            border-bottom: none;
        }

        .comments-section {
            max-width: 1400px;
            margin: 60px auto 40px;
            padding: 40px;
            background: rgba(0, 107, 182, 0.1);
            border: 3px solid var(--primary);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .comments-section h2 {
            font-family: 'Russo One', sans-serif;
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 30px;
            text-shadow: 2px 2px 0 var(--primary);
        }

        .comment-form {
            margin-bottom: 40px;
        }

        .comment-form input,
        .comment-form textarea {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--primary);
            border-radius: 8px;
            color: var(--light);
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
        }

        .comment-form input::placeholder,
        .comment-form textarea::placeholder {
            color: rgba(245, 245, 245, 0.5);
        }

        .comment-form textarea {
            min-height: 120px;
            resize: vertical;
        }

        .comments-list {
            margin-top: 30px;
        }

        .comment {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary);
            border-radius: 8px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .comment-author {
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .comment-date {
            font-size: 0.85rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .comment-text {
            line-height: 1.6;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.5);
            margin-top: 60px;
            border-top: 3px solid var(--secondary);
        }

        footer p {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            color: var(--primary);
            letter-spacing: 2px;
        }

        /* Card Detail Modal */
        .card-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }

        .card-detail-modal.active {
            display: block;
        }

        .modal-close {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--accent);
            color: var(--secondary);
            border: 3px solid var(--secondary);
            padding: 15px 30px;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            cursor: pointer;
            border-radius: 8px;
            z-index: 10000;
            transition: all 0.3s;
            letter-spacing: 2px;
        }

        .modal-close:hover {
            background: var(--secondary);
            color: var(--accent);
            transform: scale(1.05);
        }

        .card-detail-content {
            max-width: 1400px;
            margin: 80px auto 40px;
            padding: 40px;
            background: linear-gradient(135deg, var(--dark) 0%, #1a1a1a 100%);
            border: 4px solid var(--secondary);
            border-radius: 20px;
        }

        .detail-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .detail-header h2 {
            font-family: 'Russo One', sans-serif;
            font-size: 2.5rem;
            color: var(--secondary);
            text-shadow: 3px 3px 0 var(--primary);
            margin-bottom: 10px;
        }

        .detail-header .card-subtitle {
            font-size: 1.2rem;
            color: var(--primary);
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 2px;
        }

        .detail-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .detail-image-container {
            background: rgba(0, 101, 58, 0.1);
            border: 3px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .detail-image-container h3 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .detail-image-container img {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .detail-image-container img:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 50px rgba(255, 194, 0, 0.4);
        }

        .detail-info {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 30px;
            background: rgba(0, 101, 58, 0.1);
            border: 2px solid var(--primary);
            border-radius: 15px;
        }

        .detail-info-item {
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-left: 4px solid var(--secondary);
            border-radius: 5px;
        }

        .detail-info-item .info-label {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            color: var(--secondary);
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        .detail-info-item .info-value {
            font-size: 1.1rem;
            color: var(--light);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
                border-right: none;
                border-bottom: 3px solid var(--secondary);
                padding: 15px;
            }

            .content-wrapper {
                margin-left: 0;
                width: 100%;
            }

            #gallery {
                grid-template-columns: 1fr;
                gap: 30px;
                padding: 15px;
            }

            .controls {
                padding: 0;
            }

            .filter-grid {
                gap: 15px;
            }

            button {
                font-size: 0.95rem;
                padding: 10px 18px;
            }

            .detail-images {
                grid-template-columns: 1fr;
            }

            .detail-info {
                grid-template-columns: 1fr;
            }

            .card-detail-content {
                padding: 20px;
                margin: 60px 10px 20px;
            }

            .modal-close {
                padding: 10px 20px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Fixed Left Sidebar -->
        <aside class="sidebar">
            <div class="controls">
                <div class="sidebar-header">
                    <h2>FILTERS</h2>
                    <p>Refine Your Collection</p>
                </div>

                <button onclick="clearAllFilters()" class="clear-btn">Clear All Filters</button>

                <div class="results-info">
                    <span id="resultsCount">Showing 644 of 644 cards</span>
                </div>
                
                <div class="filter-grid">
            <div class="filter-group">
                <label>Search</label>
                <input type="text" id="searchInput" placeholder="Search cards...">
            </div>

            <div class="filter-group">
                <label>Year</label>
                <select id="yearFilter" multiple size="5">
                    <option value="">All Years</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Brand</label>
                <select id="brandFilter" multiple size="5" onchange="updateSetOptions()">
                    <option value="">All Brands</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Set</label>
                <select id="releaseFilter" multiple size="5">
                    <option value="">All Sets</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Type</label>
                <select id="typeFilter" multiple size="5">
                    <option value="">All Types</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Autograph (AU)</label>
                <select id="auFilter">
                    <option value="">All</option>
                    <option value="true">Yes</option>
                    <option value="false">No</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Memorabilia (MEM)</label>
                <select id="memFilter">
                    <option value="">All</option>
                    <option value="true">Yes</option>
                    <option value="false">No</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Serial Numbered</label>
                <select id="serialFilter">
                    <option value="">All</option>
                    <option value="true">Yes</option>
                    <option value="false">No</option>
                </select>
            </div>
        </div>

        <div class="sort-section">
            <label>Sort By:</label>
            <select id="sortBy">
                <option value="year-asc">Year (Oldest First)</option>
                <option value="year-desc">Year (Newest First)</option>
                <option value="brand-asc">Brand (A-Z)</option>
                <option value="brand-desc">Brand (Z-A)</option>
                <option value="type-asc">Type (A-Z)</option>
                <option value="type-desc">Type (Z-A)</option>
                <option value="number-asc">Card Number (Low-High)</option>
                <option value="number-desc">Card Number (High-Low)</option>
            </select>
            <button onclick="applyFilters()" class="apply-filters-btn">üîç Apply Filters</button>
        </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <div class="content-wrapper">
            <header>
                <div class="header-content">
                    <img src="reignman-logo.png" alt="Reignman Logo" class="header-logo">
                    <h1>THE REIGNMAN COLLECTION</h1>
                    <img src="reignman-logo.png" alt="Reignman Logo" class="header-logo">
                </div>
                <div class="subtitle">monkeybonercards</div>
            </header>

            <div id="gallery"></div>

    <!-- Card Detail Modal -->
    <div class="card-detail-modal" id="cardDetailModal">
        <button class="modal-close" onclick="closeCardDetail()">‚úï CLOSE</button>
        <div class="card-detail-content" id="cardDetailContent">
            <!-- Content will be populated by JavaScript -->
        </div>
    </div>

    <div class="comments-section">
        <h2>Comments & Discussion</h2>
        <form class="comment-form" onsubmit="addComment(event)">
            <input type="text" id="commentName" placeholder="Your Name" required>
            <textarea id="commentText" placeholder="Share your thoughts about the collection..." required></textarea>
            <button type="submit">Post Comment</button>
        </form>
        <div class="comments-list" id="commentsList">
            <!-- Comments will appear here -->
        </div>
    </div>

    <footer>
        <p>The Reign Man Collection ‚Ä¢ Est. 2025</p>
    </footer>
        </div>
    </div>

    <script>
        let allCards = [];
        let isLoading = true;

        // Fetch data from local JSON file
        async function fetchCardsFromAirtable() {
            try {
                const response = await fetch('cards-data.json');

                if (!response.ok) {
                    throw new Error(`Failed to load cards data: ${response.status}`);
                }

                allCards = await response.json();

                isLoading = false;
                initializeFilters();
                renderCards(allCards);
                updateResultsCount(allCards.length);

            } catch (error) {
                console.error('Error loading cards:', error);
                isLoading = false;
                showError('Failed to load card collection. Please refresh the page.');
            }
        }

        function showError(message) {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                    <h2 style="font-family: 'Russo One', sans-serif; color: var(--accent); font-size: 2rem; margin-bottom: 20px;">
                        Error Loading Cards
                    </h2>
                    <p style="color: var(--light); font-size: 1.1rem;">
                        ${message}
                    </p>
                </div>
            `;
        }

        function showLoading() {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                    <h2 style="font-family: 'Russo One', sans-serif; color: var(--secondary); font-size: 2rem; margin-bottom: 20px;">
                        Loading Collection...
                    </h2>
                    <p style="color: var(--light); font-size: 1.1rem;">
                        Loading 644 cards from The Reignman Collection
                    </p>
                </div>
            `;
        }

        // Initialize filter dropdowns with unique values
        function initializeFilters() {
            if (allCards.length === 0) return;

            const years = [...new Set(allCards.map(c => c.year).filter(y => y))].sort((a, b) => a - b);
            const brands = [...new Set(allCards.map(c => c.brand).filter(b => b))].sort();
            const releases = [...new Set(allCards.map(c => c.release).filter(r => r))].sort();
            const types = [...new Set(allCards.map(c => c.type).filter(t => t))].sort();
            const subsets = [...new Set(allCards.map(c => c.subset).filter(s => s))].sort();

            populateSelect('yearFilter', years);
            populateSelect('brandFilter', brands);
            populateSelect('releaseFilter', releases);
            populateSelect('typeFilter', types);
        }

        function updateSetOptions() {
            const selectedBrands = getSelectedValues('brandFilter');
            const releaseFilter = document.getElementById('releaseFilter');
            
            // Get all unique sets for selected brands (or all if none selected)
            let availableSets;
            if (selectedBrands.length === 0) {
                // No brands selected - show all sets
                availableSets = [...new Set(allCards.map(c => c.release).filter(r => r))].sort();
            } else {
                // Show only sets from selected brands
                availableSets = [...new Set(
                    allCards
                        .filter(c => selectedBrands.includes(c.brand))
                        .map(c => c.release)
                        .filter(r => r)
                )].sort();
            }
            
            // Preserve current selections that are still available
            const currentSelections = getSelectedValues('releaseFilter');
            const validSelections = currentSelections.filter(s => availableSets.includes(s));
            
            // Clear and repopulate
            releaseFilter.innerHTML = '<option value="">All Sets</option>';
            availableSets.forEach(set => {
                const option = document.createElement('option');
                option.value = set;
                option.textContent = set;
                if (validSelections.includes(set)) {
                    option.selected = true;
                }
                releaseFilter.appendChild(option);
            });
        }

        function updateResultsCount(count) {
            document.getElementById('resultsCount').textContent = 
                `Showing ${count} of ${allCards.length} cards`;
        }

        function populateSelect(selectId, values) {
            const select = document.getElementById(selectId);
            const currentOptions = select.innerHTML;
            
            values.forEach(value => {
                const option = document.createElement('option');
                option.value = value;
                option.textContent = value;
                select.appendChild(option);
            });
        }

        function getSelectedValues(selectId) {
            const select = document.getElementById(selectId);
            const selected = Array.from(select.selectedOptions).map(opt => opt.value);
            return selected.filter(val => val !== "");
        }

        function applyFilters() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedYears = getSelectedValues('yearFilter');
            const selectedBrands = getSelectedValues('brandFilter');
            const selectedReleases = getSelectedValues('releaseFilter');
            const selectedTypes = getSelectedValues('typeFilter');
            const auFilter = document.getElementById('auFilter').value;
            const memFilter = document.getElementById('memFilter').value;
            const serialFilter = document.getElementById('serialFilter').value;
            const sortBy = document.getElementById('sortBy').value;

            // Filter cards
            let filteredCards = allCards.filter(card => {
                // Search filter - search across multiple fields
                const searchMatch = searchTerm === '' || 
                    (card.brand && card.brand.toLowerCase().includes(searchTerm)) ||
                    (card.release && card.release.toLowerCase().includes(searchTerm)) ||
                    (card.type && card.type.toLowerCase().includes(searchTerm)) ||
                    (card.number && card.number.toString().toLowerCase().includes(searchTerm)) ||
                    (card.year && card.year.toString().includes(searchTerm)) ||
                    (card.name && card.name.toLowerCase().includes(searchTerm)) ||
                    (card.subset && card.subset.toLowerCase().includes(searchTerm));

                // Multi-select filters
                const yearMatch = selectedYears.length === 0 || selectedYears.includes(card.year.toString());
                const brandMatch = selectedBrands.length === 0 || selectedBrands.includes(card.brand);
                const releaseMatch = selectedReleases.length === 0 || selectedReleases.includes(card.release);
                const typeMatch = selectedTypes.length === 0 || selectedTypes.includes(card.type);

                // AU/MEM/Serial filters
                const auMatch = auFilter === '' || 
                    (auFilter === 'true' && card.au === true) || 
                    (auFilter === 'false' && card.au === false);
                
                const memMatch = memFilter === '' || 
                    (memFilter === 'true' && card.mem === true) || 
                    (memFilter === 'false' && card.mem === false);
                
                const serialMatch = serialFilter === '' || 
                    (serialFilter === 'true' && card.serialNumbered && card.serialNumbered !== '') || 
                    (serialFilter === 'false' && (!card.serialNumbered || card.serialNumbered === ''));

                return searchMatch && yearMatch && brandMatch && releaseMatch && typeMatch && 
                       auMatch && memMatch && serialMatch;
            });

            // Sort cards
            filteredCards = sortFilteredCards(filteredCards, sortBy);

            // Update results count
            updateResultsCount(filteredCards.length);

            // Render filtered and sorted cards
            renderCards(filteredCards);
        }

        function sortFilteredCards(cards, sortBy) {
            const sorted = [...cards];
            
            switch(sortBy) {
                case 'year-asc':
                    sorted.sort((a, b) => a.year - b.year);
                    break;
                case 'year-desc':
                    sorted.sort((a, b) => b.year - a.year);
                    break;
                case 'brand-asc':
                    sorted.sort((a, b) => a.brand.localeCompare(b.brand));
                    break;
                case 'brand-desc':
                    sorted.sort((a, b) => b.brand.localeCompare(a.brand));
                    break;
                case 'type-asc':
                    sorted.sort((a, b) => a.type.localeCompare(b.type));
                    break;
                case 'type-desc':
                    sorted.sort((a, b) => b.type.localeCompare(a.type));
                    break;
                case 'number-asc':
                    sorted.sort((a, b) => {
                        const numA = parseInt(a.number.replace(/\D/g, '')) || 0;
                        const numB = parseInt(b.number.replace(/\D/g, '')) || 0;
                        return numA - numB;
                    });
                    break;
                case 'number-desc':
                    sorted.sort((a, b) => {
                        const numA = parseInt(a.number.replace(/\D/g, '')) || 0;
                        const numB = parseInt(b.number.replace(/\D/g, '')) || 0;
                        return numB - numA;
                    });
                    break;
            }
            
            return sorted;
        }

        function clearAllFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('yearFilter').selectedIndex = -1;
            document.getElementById('brandFilter').selectedIndex = -1;
            document.getElementById('releaseFilter').selectedIndex = -1;
            document.getElementById('typeFilter').selectedIndex = -1;
            document.getElementById('auFilter').selectedIndex = 0;
            document.getElementById('memFilter').selectedIndex = 0;
            document.getElementById('serialFilter').selectedIndex = 0;
            document.getElementById('sortBy').selectedIndex = 0;
            
            applyFilters();
        }

        function checkImageOrientation(img) {
            if (img.naturalWidth > img.naturalHeight) {
                // Image is landscape
                img.classList.add('landscape');
            }
        }

        function renderCards(cards) {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = '';
            
            if (cards.length === 0) {
                gallery.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                        <h2 style="font-family: 'Russo One', sans-serif; color: var(--secondary); font-size: 2rem; margin-bottom: 20px;">
                            No cards found
                        </h2>
                        <p style="color: var(--light); font-size: 1.1rem;">
                            Try adjusting your filters or search terms
                        </p>
                    </div>
                `;
                return;
            }
            
            cards.forEach(card => {
                const placeholder = 'https://reignmancollection.wordpress.com/wp-content/uploads/2026/02/reignmancollectionlogo02.png';
                const frontImg = card.frontImage || placeholder;
                const backImg = card.backImage || placeholder;
                
                const cardHTML = `
                    <div class="card-container">
                        <div class="card" onclick="openCardDetail(${card.id})">
                            <div class="card-face card-front">
                                <img src="${frontImg}" alt="${card.year} ${card.brand} ${card.player} #${card.number}" class="card-image" onerror="this.src='${placeholder}'" onload="checkImageOrientation(this)">
                            </div>
                            <div class="card-face card-back">
                                <img src="${backImg}" alt="${card.year} ${card.brand} ${card.player} Back" class="card-image" onerror="this.src='${placeholder}'" onload="checkImageOrientation(this)">
                            </div>
                        </div>
                        <div class="card-info">
                            <h3>${card.name || 'Unknown Card'}</h3>
                            <button class="details-toggle" onclick="event.stopPropagation(); toggleDetails('${card.id}')">
                                Show More Info
                            </button>
                            <div class="extra-details" id="details-${card.id}">
                                ${card.release ? `<p><span class="label">Set:</span> ${card.release}</p>` : ''}
                                ${card.subset ? `<p><span class="label">Subset:</span> ${card.subset}</p>` : ''}
                                ${card.type ? `<p><span class="label">Set Type:</span> ${card.type}</p>` : ''}
                                ${card.au ? `<p><span class="label">AU:</span> Yes</p>` : ''}
                                ${card.mem ? `<p><span class="label">MEM:</span> Yes</p>` : ''}
                                ${card.serialNumbered ? `<p><span class="label">Serial Numbered:</span> ${card.serialNumbered}</p>` : ''}
                            </div>
                        </div>
                    </div>
                `;
                gallery.innerHTML += cardHTML;
            });
        }

        function toggleDetails(cardId) {
            const detailsElement = document.getElementById(`details-${cardId}`);
            const button = event.target;
            
            if (detailsElement.classList.contains('active')) {
                detailsElement.classList.remove('active');
                button.textContent = 'Show More Info';
            } else {
                detailsElement.classList.add('active');
                button.textContent = 'Show Less Info';
            }
        }

        function openCardDetail(cardId) {
            const card = allCards.find(c => c.id === cardId);
            if (!card) return;

            const modal = document.getElementById('cardDetailModal');
            const content = document.getElementById('cardDetailContent');

            const placeholder = 'https://reignmancollection.wordpress.com/wp-content/uploads/2026/02/reignmancollectionlogo02.png';
            const frontImg = card.frontImage || placeholder;
            const backImg = card.backImage || placeholder;

            content.innerHTML = `
                <div class="detail-header">
                    <h2>${card.name || 'Unknown Card'}</h2>
                    <div class="card-subtitle">
                        ${card.year || ''} ${card.brand || ''} ${card.release ? `‚Ä¢ ${card.release}` : ''} ${card.number ? `‚Ä¢ #${card.number}` : ''}
                    </div>
                </div>

                <div class="detail-images">
                    <div class="detail-image-container">
                        <h3>Front</h3>
                        <a href="${frontImg}" target="_blank" rel="noopener noreferrer">
                            <img src="${frontImg}" alt="Card Front" onerror="this.src='${placeholder}'" style="cursor: pointer;">
                        </a>
                    </div>
                    <div class="detail-image-container">
                        <h3>Back</h3>
                        <a href="${backImg}" target="_blank" rel="noopener noreferrer">
                            <img src="${backImg}" alt="Card Back" onerror="this.src='${placeholder}'" style="cursor: pointer;">
                        </a>
                    </div>
                </div>

                <div class="detail-info">
                    ${card.year ? `<div class="detail-info-item"><div class="info-label">Year</div><div class="info-value">${card.year}</div></div>` : ''}
                    ${card.brand ? `<div class="detail-info-item"><div class="info-label">Brand</div><div class="info-value">${card.brand}</div></div>` : ''}
                    ${card.release ? `<div class="detail-info-item"><div class="info-label">Set</div><div class="info-value">${card.release}</div></div>` : ''}
                    ${card.number ? `<div class="detail-info-item"><div class="info-label">Card Number</div><div class="info-value">#${card.number}</div></div>` : ''}
                    ${card.player ? `<div class="detail-info-item"><div class="info-label">Player</div><div class="info-value">${card.player}</div></div>` : ''}
                    ${card.subset ? `<div class="detail-info-item"><div class="info-label">Subset</div><div class="info-value">${card.subset}</div></div>` : ''}
                    ${card.type ? `<div class="detail-info-item"><div class="info-label">Set Type</div><div class="info-value">${card.type}</div></div>` : ''}
                    ${card.serialNumbered ? `<div class="detail-info-item"><div class="info-label">Serial Numbered</div><div class="info-value">${card.serialNumbered}</div></div>` : ''}
                    ${card.au ? `<div class="detail-info-item"><div class="info-label">Autograph</div><div class="info-value">Yes</div></div>` : ''}
                    ${card.mem ? `<div class="detail-info-item"><div class="info-label">Memorabilia</div><div class="info-value">Yes</div></div>` : ''}
                    ${card.packOdds ? `<div class="detail-info-item"><div class="info-label">Pack Odds</div><div class="info-value">${card.packOdds}</div></div>` : ''}
                    <div class="detail-info-item"><div class="info-label">With Parallel</div><div class="info-value">${card.withParallel ? 'Yes' : 'No'}</div></div>
                    ${card.dateAdded ? `<div class="detail-info-item"><div class="info-label">Date Added</div><div class="info-value">${card.dateAdded}</div></div>` : ''}
                </div>
            `;

            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeCardDetail() {
            const modal = document.getElementById('cardDetailModal');
            modal.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }

        // Close modal on ESC key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCardDetail();
            }
        });

        // Close modal when clicking outside content
        document.getElementById('cardDetailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCardDetail();
            }
        });

        function addComment(event) {
            event.preventDefault();
            
            const name = document.getElementById('commentName').value;
            const text = document.getElementById('commentText').value;
            const date = new Date().toLocaleDateString('en-US', { 
                month: 'long', 
                day: 'numeric', 
                year: 'numeric' 
            });

            const commentHTML = `
                <div class="comment">
                    <div class="comment-author">${name}</div>
                    <div class="comment-date">${date}</div>
                    <div class="comment-text">${text}</div>
                </div>
            `;

            document.getElementById('commentsList').insertAdjacentHTML('afterbegin', commentHTML);
            
            // Clear form
            document.getElementById('commentName').value = '';
            document.getElementById('commentText').value = '';
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            showLoading();
            fetchCardsFromAirtable();
        });
    </script>
</body>
</html>
